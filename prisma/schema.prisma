generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Procedure {
  id          Int       @id @default(autoincrement())
  name        String    @db.VarChar(255)
  description String?
  category    Int
  nationwide  Boolean?  @default(false)
  created_at   DateTime? @default(now())

  @@map("procedures")
}

model ProcedureStep {
  id           Int     @id @default(autoincrement())
  procedure_id Int
  step_order   Int
  title        String  @db.VarChar(255)
  description  String?
  authority_id Int

  @@unique([procedure_id, step_order], map: "uq_procedure_step")
  @@map("procedure_steps")
}

model Document {
  id          Int     @id @default(autoincrement())
  name        String  @db.VarChar(255)
  description String?

  @@map("documents")
}

model ProcedureDocument {
  procedure_id Int
  document_id  Int
  required     Boolean? @default(true)
  prepared_by  Int

  @@id([procedure_id, document_id])
  @@map("procedure_documents")
}

model Authority {
  id          Int    @id @default(autoincrement())
  name        String @db.VarChar(255)
  level       Int
  location_id Int

  @@map("authorities")
}

model Location {
  id        Int    @id @default(autoincrement())
  name      String @db.VarChar(255)
  level     Int
  parent_id Int?

  @@map("locations")
}
